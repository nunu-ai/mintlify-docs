---
title: 'Start a Run'
openapi: 'POST /runs'
---

<Info>
  **Permission Required**: `project:operate-runs`
</Info>

Start a new test run using either a multiplayer test or a test plan.

## Request Body

<Note>
  Provide either `multiplayer_test_id` **or** `test_plan_id`, not both.
</Note>

<ParamField body="multiplayer_test_id" type="string">
  UUID of the test to run. Required if `test_plan_id` is not provided.
</ParamField>

<ParamField body="test_plan_id" type="string">
  UUID of the test plan to run. Required if `multiplayer_test_id` is not provided.
</ParamField>

<ParamField body="deployment_config_id" type="string" required>
  UUID of the deployment configuration
</ParamField>

<ParamField body="additional_tags" type="string[]">
  Tags to add to the run
</ParamField>

<ParamField body="render_templates" type="boolean" default="false">
  Enable template rendering
</ParamField>

<ParamField body="template_data" type="object">
  Key-value pairs for template variables
</ParamField>

<ParamField body="options" type="object">
  Test execution options

  <Expandable title="options properties">
    <ParamField body="options.min_time_seconds" type="integer">
      Minimum test duration in seconds
    </ParamField>
    <ParamField body="options.max_time_seconds" type="integer">
      Maximum test duration (timeout) in seconds
    </ParamField>
    <ParamField body="options.performance_monitoring" type="boolean">
      Enable performance data collection
    </ParamField>
    <ParamField body="options.mobile_auto_grant_permissions" type="boolean">
      Auto-grant app permissions on mobile
    </ParamField>
    <ParamField body="options.mobile_geolocation" type="string">
      Geolocation mode: `none`, `auto`, or coordinates
    </ParamField>
  </Expandable>
</ParamField>

## Response

<ResponseField name="ok" type="boolean" required>
  Whether the request succeeded
</ResponseField>

<ResponseField name="status" type="integer" required>
  HTTP status code
</ResponseField>

<ResponseField name="message" type="string" required>
  Status message (e.g., `queued`)
</ResponseField>

<ResponseField name="data" type="object" required>
  Response data

  <Expandable title="data properties">
    <ResponseField name="data.job_id" type="string" required>
      Job ID for tracking and stopping the run
    </ResponseField>
    <ResponseField name="data.multiplayer_run_id" type="string" required>
      Run ID (12 lowercase alphanumeric chars like `1g20ccrgksb`)
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>
```bash cURL
curl -X POST "https://nunu.ai/api/v1/runs" \
  -H "X-Api-Key: YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "multiplayer_test_id": "789e0123-e89b-12d3-a456-426614174000",
    "deployment_config_id": "456e7890-e89b-12d3-a456-426614174000",
    "additional_tags": ["ci", "pr-123"]
  }'
```

```typescript JavaScript
const response = await fetch("https://nunu.ai/api/v1/runs", {
  method: "POST",
  headers: {
    "X-Api-Key": process.env.NUNU_API_TOKEN,
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    multiplayer_test_id: "789e0123-e89b-12d3-a456-426614174000",
    deployment_config_id: "456e7890-e89b-12d3-a456-426614174000",
    additional_tags: ["ci", "pr-123"],
  }),
});
const data = await response.json();
```

```python Python
import requests
import os

response = requests.post(
    "https://nunu.ai/api/v1/runs",
    headers={
        "X-Api-Key": os.environ["NUNU_API_TOKEN"],
        "Content-Type": "application/json"
    },
    json={
        "multiplayer_test_id": "789e0123-e89b-12d3-a456-426614174000",
        "deployment_config_id": "456e7890-e89b-12d3-a456-426614174000",
        "additional_tags": ["ci", "pr-123"]
    }
)
data = response.json()
```
</RequestExample>

<ResponseExample>
```json 201 Success
{
  "ok": true,
  "status": 201,
  "message": "queued",
  "data": {
    "job_id": "550e8400-e29b-41d4-a716-446655440000",
    "multiplayer_run_id": "1g20ccrgksb"
  }
}
```

```json 404 Not Found
{
  "ok": false,
  "status": 404,
  "message": "multiplayer test not found",
  "error": "multiplayer test not found"
}
```
</ResponseExample>

---

## Complete CI/CD Example

Here's a complete example that starts a test and polls for completion:

<CodeGroup>

```typescript JavaScript/TypeScript
const API_TOKEN = process.env.NUNU_API_TOKEN;
const BASE_URL = "https://nunu.ai/api/v1";

async function startAndWaitForTest(
  testId: string,
  deploymentConfigId: string
): Promise<any> {
  // Start the test
  const startResponse = await fetch(`${BASE_URL}/runs`, {
    method: "POST",
    headers: {
      "X-Api-Key": API_TOKEN,
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      multiplayer_test_id: testId,
      deployment_config_id: deploymentConfigId,
    }),
  });

  const startResult = await startResponse.json();
  
  if (!startResult.ok) {
    throw new Error(`Failed to start test: ${startResult.error}`);
  }

  const runId = startResult.data.multiplayer_run_id;
  console.log(`Test started: ${runId}`);

  // Poll for completion
  while (true) {
    const detailsResponse = await fetch(`${BASE_URL}/runs/${runId}`, {
      headers: { "X-Api-Key": API_TOKEN },
    });

    const details = await detailsResponse.json();

    if (details.state === "completed") {
      console.log(`Test completed with result: ${details.result}`);
      return details;
    }

    console.log(`Test still running... (state: ${details.state})`);
    await new Promise((resolve) => setTimeout(resolve, 30000));
  }
}
```

```python Python
import requests
import os
import time

API_TOKEN = os.environ["NUNU_API_TOKEN"]
BASE_URL = "https://nunu.ai/api/v1"

def start_and_wait_for_test(test_id: str, deployment_config_id: str) -> dict:
    headers = {"X-Api-Key": API_TOKEN}
    
    # Start the test
    start_response = requests.post(
        f"{BASE_URL}/runs",
        headers={**headers, "Content-Type": "application/json"},
        json={
            "multiplayer_test_id": test_id,
            "deployment_config_id": deployment_config_id
        }
    )
    
    start_result = start_response.json()
    
    if not start_result.get("ok"):
        raise Exception(f"Failed to start test: {start_result.get('error')}")
    
    run_id = start_result["data"]["multiplayer_run_id"]
    print(f"Test started: {run_id}")
    
    # Poll for completion
    while True:
        details_response = requests.get(
            f"{BASE_URL}/runs/{run_id}",
            headers=headers
        )
        details = details_response.json()
        
        if details["state"] == "completed":
            print(f"Test completed with result: {details['result']}")
            return details
        
        print(f"Test still running... (state: {details['state']})")
        time.sleep(30)
```

```bash Shell Script
#!/bin/bash
set -e

API_TOKEN="${NUNU_API_TOKEN}"
TEST_ID="${NUNU_TEST_ID}"
DEPLOYMENT_ID="${NUNU_DEPLOYMENT_ID}"
BASE_URL="https://nunu.ai/api/v1"

# Start the test
START_RESPONSE=$(curl -s -X POST "${BASE_URL}/runs" \
  -H "X-Api-Key: ${API_TOKEN}" \
  -H "Content-Type: application/json" \
  -d "{
    \"multiplayer_test_id\": \"${TEST_ID}\",
    \"deployment_config_id\": \"${DEPLOYMENT_ID}\"
  }")

RUN_ID=$(echo "$START_RESPONSE" | jq -r '.data.multiplayer_run_id')

if [ "$RUN_ID" == "null" ]; then
  echo "Failed to start test: $START_RESPONSE"
  exit 1
fi

echo "Test started: $RUN_ID"

# Poll for completion
while true; do
  DETAILS=$(curl -s "${BASE_URL}/runs/${RUN_ID}" \
    -H "X-Api-Key: ${API_TOKEN}")
  
  STATE=$(echo "$DETAILS" | jq -r '.state')
  
  if [ "$STATE" == "completed" ]; then
    RESULT=$(echo "$DETAILS" | jq -r '.result')
    echo "Test completed with result: $RESULT"
    [ "$RESULT" != "success" ] && exit 1
    exit 0
  fi
  
  echo "Test running... (state: $STATE)"
  sleep 30
done
```

</CodeGroup>
